{% extends "account/settings.html" %}
{% load bootstrap %}

{% block script %}
<script>
$(function() {
    setWarning = function () {
        if ($("#id_use_password").is(':checked')) {
            $("#id_warning").show();
        } else {
            $("#id_warning").hide();
        }
    };

    $("select#id_cluster").unbind("change"); // disable default from scripts.js

    $("#id_use_password").change(setWarning);
    setWarning();
})
</script>
{% endblock %}

{% block settingsbody %}
<form action="." method="post">
    {% csrf_token %}
    <input type="hidden" name="delete">
    <table class="table table-striped">
        <tr>
            <th>Cluster</th>
            <th>Username</th>
            <th>Use Password?</th>
            <th>Delete?</th>
        </tr>
        {% for cred in user.credentials.all %}
        <tr>
            <td>{{ cred.cluster }}</td>
            <td>{{ cred.username }}</td>
            <td>{{ cred.use_password }}</td>
            <td><div class="checkbox"><input name="{{ cred }}-{{ cred.id }}" type="checkbox"></div></td>
        </tr>
        {% endfor %}
    </table>
    <div class="row">
        <div class="col-xs-6">
            <button class="btn btn-lg btn-danger btn-block" type="submit">Delete Credential</button>
        </div>
        <div class="col-xs-6">
            <button class="btn btn-lg btn-block" type="reset">Reset</button>
        </div>
    </div>
</form>

<hr>

<form action="." method="post">
    {% csrf_token %}
    {{ form|bootstrap }}
    <div class="alert alert-warning" id="id_warning" style="display: none;"><strong>Warning!</strong> Using a password instead of the default SSH key is less secure!</div>
    <div class="row">
        <div class="col-xs-6">
            <button class="btn btn-lg btn-primary btn-block" type="submit">Add Credential</button>
        </div>
        <div class="col-xs-6">
            <button class="btn btn-lg btn-block" type="reset">Reset</button>
        </div>
    </div>
</form>
{% endblock %}